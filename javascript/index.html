<!DOCTYPE html>
<html lang='ja'>

<head>
    <meta charset="utf-8">
    <title>Png2RspConverter</title>
</head>

<body>
    <script src="main.js"></script>
    <script>
        async function run()
        {
            let thumbnail = document.getElementById("thumbnail").files[0];
            let images = document.getElementById("images").files
            const rsp = new RSPObject();
            await rsp.init(
                "2D-VFlower", // name: string,
                new MultiLanguageText("2D-v_flower", "2D-花ちゃん"), // displayName: MultiLanguageText,
                new MultiLanguageText("_", "うぷはしのテスト！"), // displayDescription: MultiLanguageText,
                ["うぷはし"], // copyrights: string[],
                thumbnail, // thumbnailFile: File,
                new ActionInfo("kiri", new MultiLanguageText("kiri", "キリッ"), images[0], images[1], images[2]),
                new ActionInfo("aho", new MultiLanguageText("aho", "あほ"), images[3], images[4]),
                [
                    new ActionInfo("normal", new MultiLanguageText("normal", "ノーマル"), images[5]),
                    new ActionInfo("normal2", new MultiLanguageText("normal2", "ノーマル2"), images[6]),
                ]);
            let file = rsp.save("2D-VFlower.rsp");
            document.getElementById("save").href = URL.createObjectURL(file);
            document.getElementById("save").download = file.name;

            let reader = new FileReader();
            reader.addEventListener("onload", () => document.getElementById("thumbnail_preview").src = reader.result);
            reader.readAsDataURL(thumbnail);

            console.log(rsp);
        }
    </script>

    <input type="file" id="thumbnail" accept=".png">
    <input type="file" multiple="multiple" id="images" accept=".png">
    <button onclick="run()">RUN</button>
    <a id="save"><button>SAVE</button></a>
</body>

</html>